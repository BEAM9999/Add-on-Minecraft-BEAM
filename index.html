<!DOCTYPE html>
<html lang="th">
<head>
  <link rel="icon" href="favicon-96x96.png">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î Add-on Minecraft</title>
  <style>
    body {
      background: #181818;
      color: #eee;
      font-family: 'Segoe UI', Arial, sans-serif;
      margin: 0;
      padding: 0;
    }
    header {
      background: #222;
      padding: 20px;
      text-align: center;
      font-size: 2em;
      font-weight: bold;
      letter-spacing: 2px;
      color: #ffb300;
    }
    .search-bar {
      display: flex;
      justify-content: center;
      align-items: center;
      margin: 30px 0 10px 0;
    }
    .search-bar input {
      width: 300px;
      padding: 10px;
      border-radius: 25px 0 0 25px;
      border: none;
      background: #333;
      color: #fff;
      font-size: 1em;
      outline: none;
    }
    .search-bar button {
      padding: 10px 18px;
      border-radius: 0 25px 25px 0;
      border: none;
      background: #444;
      color: #ffb300;
      cursor: pointer;
      font-size: 1em;
    }
    .addon-list {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 30px;
      margin: 30px 0;
    }
    .addon-card {
      background: #232323;
      border-radius: 12px;
      box-shadow: 0 2px 8px #0006;
      width: 320px;
      padding: 18px;
      display: flex;
      flex-direction: column;
      align-items: center;
      transition: box-shadow 0.2s;
      cursor: pointer;
    }
    .addon-card:hover {
      box-shadow: 0 4px 16px #000a;
    }
    .addon-img {
      width: 120px;
      height: 120px;
      object-fit: cover;
      border-radius: 8px;
      margin-bottom: 12px;
      background: #444;
    }
    .addon-title {
      font-size: 1.2em;
      font-weight: bold;
      margin-bottom: 8px;
      color: #ffb300;
      text-align: center;
    }
    .addon-desc {
      font-size: 1em;
      margin-bottom: 12px;
      text-align: center;
      color: #ccc;
    }
    .addon-download {
      background: #ffb300;
      color: #222;
      border: none;
      border-radius: 6px;
      padding: 8px 20px;
      font-size: 1em;
      font-weight: bold;
      cursor: pointer;
      margin-bottom: 6px;
    }
    .admin-btn {
      background: #00c853;
      color: #fff;
      border: none;
      border-radius: 6px;
      padding: 8px 20px;
      font-size: 1em;
      font-weight: bold;
      cursor: pointer;
      margin-top: 18px;
      display: none;
    }
    .modal {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: #000a;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 999;
    }
    .modal-content {
      background: #232323;
      border-radius: 12px;
      padding: 30px;
      min-width: 350px;
      max-width: 90vw;
      max-height: 80vh;
      overflow-y: auto;
      color: #fff;
      box-shadow: 0 2px 16px #000a;
      position: relative;
    }
    .close-btn {
      position: absolute;
      top: 12px;
      right: 18px;
      background: #ff1744;
      color: #fff;
      border: none;
      border-radius: 50%;
      width: 32px;
      height: 32px;
      font-size: 1.2em;
      cursor: pointer;
    }
    .addon-versions {
      margin-top: 18px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .version-btn {
      background: #ffb300;
      color: #222;
      border: none;
      border-radius: 6px;
      padding: 8px 20px;
      font-size: 1em;
      font-weight: bold;
      cursor: pointer;
    }
    .add-form {
      display: flex;
      flex-direction: column;
      gap: 12px;
      margin-top: 18px;
    }
    .add-form input, .add-form textarea {
      background: #333;
      color: #fff;
      border: none;
      border-radius: 6px;
      padding: 8px;
      font-size: 1em;
    }
    .add-form label {
      color: #ffb300;
      font-weight: bold;
    }
    .add-form .add-version-btn {
      background: #00c853;
      color: #fff;
      border: none;
      border-radius: 6px;
      padding: 8px 20px;
      font-size: 1em;
      font-weight: bold;
      cursor: pointer;
      margin-top: 8px;
    }
    .add-form .submit-btn {
      background: #ffb300;
      color: #222;
      border: none;
      border-radius: 6px;
      padding: 8px 20px;
      font-size: 1em;
      font-weight: bold;
      cursor: pointer;
      margin-top: 12px;
    }
  </style>
</head>
<body>
  <header style="display:flex;align-items:center;justify-content:center;gap:18px;">
    <img id="siteLogo" src="https://yt3.googleusercontent.com/ZlpQ7tdER2Gs-vWQ4OfRQaVCxaB1cakpwc4ZyX_p3fJtqsWJ-_HdZd6D9sk3W_RdsaOzZQ67xMA=s72-c-k-c0x00ffffff-no-rj" alt="‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå" style="width:48px;height:48px;border-radius:50px;object-fit:cover;cursor:pointer;">
    <span style="position:relative; top:-5px;">Add-on Minecraft</span>
  </header>
  <!-- Modal YouTube Channel Selector -->
  <div class="modal" id="ytModal" style="display:none">
    <div class="modal-content" style="min-width:320px;max-width:95vw;text-align:center;">
      <button class="close-btn" onclick="closeYtModal()">√ó</button>
      <div style="font-size:1.2em;font-weight:bold;color:#ffb300;margin-bottom:18px;">‡∏ä‡πà‡∏≠‡∏á YouTube ‡∏ú‡∏π‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå</div>
      <div style="display:flex;justify-content:center;gap:32px;">
        <button onclick="window.open('https://www.youtube.com/@C2manga/videos','_blank')" style="background:none;border:none;cursor:pointer;">
          <img src="https://yt3.googleusercontent.com/ZlpQ7tdER2Gs-vWQ4OfRQaVCxaB1cakpwc4ZyX_p3fJtqsWJ-_HdZd6D9sk3W_RdsaOzZQ67xMA=s72-c-k-c0x00ffffff-no-rj" alt="C2manga" style="width:64px;height:64px;border-radius:50px;object-fit:cover;box-shadow:0 2px 8px #0006;">
          <div style="margin-top:8px;color:#fff;font-weight:bold;">C2manga</div>
        </button>
        <button onclick="window.open('https://www.youtube.com/@C3Manga','_blank')" style="background:none;border:none;cursor:pointer;">
          <img src="https://yt3.googleusercontent.com/B5CW5SIcNIckA-nNW9WvKadamSKa0c1O6DYxcC5Scitv50KJj-kVInUViTfZmUX0Lwj76DAouA=s72-c-k-c0x00ffffff-no-rj" alt="C3Manga" style="width:64px;height:64px;border-radius:50px;object-fit:cover;box-shadow:0 2px 8px #0006;">
          <div style="margin-top:8px;color:#fff;font-weight:bold;">C3Manga</div>
        </button>
      </div>
    </div>
  </div>
  <div class="search-bar">
  <input type="text" id="searchInput" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ Add-on..." onkeydown="if(event.key==='Enter'){searchAddons();}" onkeyup="searchAddons()">
  <button onclick="searchAddons()">üîç</button>
  </div>
  <button class="admin-btn" id="adminBtn" onclick="openAddModal()" style="position:fixed;top:5px;right:24px;z-index:1001;">+ ‡πÄ‡∏û‡∏¥‡πà‡∏° Add-on ‡πÉ‡∏´‡∏°‡πà</button>
  <button class="admin-btn" id="exportBtn" onclick="exportAddons()" style="position:fixed;top:50px;right:24px;z-index:1001;display:none;background:#1976d2;">Export Add-on</button>
  <button class="admin-btn" id="codeImportBtn" onclick="openCodeImportModal()" style="position:fixed;top:95px;right:24px;z-index:1001;display:none;background:#8e24aa;">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏î‡πâ‡∏ß‡∏¢‡πÇ‡∏Ñ‡πâ‡∏î</button>
  <!-- Modal ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Import Add-on ‡∏î‡πâ‡∏ß‡∏¢‡πÇ‡∏Ñ‡πâ‡∏î -->
  <div class="modal" id="codeImportModal" style="display:none">
    <div class="modal-content">
      <button class="close-btn" onclick="closeCodeImportModal()">√ó</button>
      <form class="add-form" id="codeImportForm">
        <label>‡∏ß‡∏≤‡∏á‡πÇ‡∏Ñ‡πâ‡∏î Add-on (Array ‡∏´‡∏£‡∏∑‡∏≠ Object)</label>
        <textarea id="codeImportTextarea" rows="10" style="font-family:monospace;"></textarea>
        <button type="submit" class="submit-btn">‡πÄ‡∏û‡∏¥‡πà‡∏° Add-on ‡∏à‡∏≤‡∏Å‡πÇ‡∏Ñ‡πâ‡∏î</button>
      </form>
    </div>
  </div>

  <div class="addon-list" id="addonList"></div>

  <!-- Modal ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Add-on -->
  <div class="modal" id="editModal" style="display:none">
    <div class="modal-content">
  <button class="close-btn" onclick="closeEditModal()">√ó</button>
  <button id="deleteAddonBtn" style="position:absolute;top:12px;left:18px;background:#ff1744;color:#fff;border:none;border-radius:6px;padding:6px 18px;font-size:1em;font-weight:bold;cursor:pointer;z-index:2;" onclick="deleteAddon()">‡∏•‡∏ö</button>
  <form class="add-form" id="editForm">
        <label>‡∏ä‡∏∑‡πà‡∏≠ Add-on</label>
        <input type="text" id="editTitle">
        <label>‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢</label>
        <textarea id="editDesc" rows="3"></textarea>
        <label>‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û (URL)</label>
        <input type="text" id="editImg">
        <label>‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡πà‡∏ô Minecraft (‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏•‡∏≤‡∏¢‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡πà‡∏ô‡πÑ‡∏î‡πâ)</label>
        <div id="editVersionFields"></div>
        <button type="button" class="add-version-btn" onclick="addEditVersionField()">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡πà‡∏ô</button>
        <button type="submit" class="submit-btn">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
      </form>
    </div>
  </div>

  <!-- Modal ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î Add-on -->
  <div class="modal" id="detailModal" style="display:none">
    <div class="modal-content" id="modalContent"></div>
  </div>

  <!-- Modal ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏û‡∏¥‡πà‡∏° Add-on -->
  <div class="modal" id="addModal" style="display:none">
    <div class="modal-content">
      <button class="close-btn" onclick="closeAddModal()">√ó</button>
      <form class="add-form" id="addForm">
        <label>‡∏ä‡∏∑‡πà‡∏≠ Add-on</label>
        <input type="text" id="newTitle">
        <label>‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢</label>
        <textarea id="newDesc" rows="3"></textarea>
        <label>‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û (URL)</label>
        <input type="text" id="newImg">
        <label>‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡πà‡∏ô Minecraft (‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏•‡∏≤‡∏¢‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡πà‡∏ô‡πÑ‡∏î‡πâ)</label>
        <div id="versionFields"></div>
        <button type="button" class="add-version-btn" onclick="addVersionField()">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡πà‡∏ô</button>
        <button type="submit" class="submit-btn">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å Add-on</button>
      </form>
    </div>
  </div>

  <script>

let addons = [
  {
    "title": "C2 The World v.1.1.11",
    "desc": "‚Äî---------------------------\n‡πÅ‡∏≠‡∏î‡∏≠‡∏≠‡∏ô‡∏ô‡∏µ‡πâ ‡∏°‡∏µ‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡πà‡∏≤ C2 the world \n‡∏ú‡∏π‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á C2‡∏°‡∏±‡∏á‡∏á‡∏∞ \n‡∏ä‡πà‡∏≠‡∏á YouTube  C2‡∏°‡∏±‡∏á‡∏á‡∏∞\n‚Äî---------------------------\n\n‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏∏‡∏ì‡∏•‡∏á‡πÅ‡∏≠‡∏î‡∏≠‡∏≠‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡πÄ‡∏´‡πá‡∏ô‡πÑ‡∏≠‡πÄ‡∏ó‡∏°‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏∏‡∏ì‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏•‡∏Å\n\n1. ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà 1\n‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏à‡∏∏‡∏î‡∏ß‡∏≤‡∏£‡πå‡∏õ‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡πÑ‡∏î‡πâ‡∏ß‡πà‡∏≤‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏ß‡∏≤‡∏£‡πå‡∏õ‡πÑ‡∏õ‡∏à‡∏∏‡∏î‡πÑ‡∏´‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏ß‡πâ\n\n2.‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà 2\n‡∏ï‡∏•‡∏≤‡∏î Safe Zone ‡πÄ‡∏£‡∏≤‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ß‡∏≤‡∏£‡πå‡∏õ‡∏°‡∏≤‡∏à‡∏∏‡∏î‡∏ô‡∏µ‡πâ‡πÑ‡∏î‡πâ‡∏Å‡πá‡∏ï‡πà‡∏≠‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡πÅ‡∏≠‡∏î‡∏≠‡∏≠‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡∏ï‡∏±‡πâ‡∏á\n‡∏Ñ‡πà‡∏≤‡πÑ‡∏ß‡πâ \n\n3.‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà 3\n‡πÇ‡∏´‡∏°‡∏î‡∏ó‡∏≥‡∏ü‡∏≤‡∏£‡πå‡∏°‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏≤‡∏û‡∏£‡∏±‡πà‡∏ß‡∏î‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏ó‡∏≥‡∏ü‡∏≤‡∏£‡πå‡∏°‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ñ‡∏∑‡∏≠‡πÄ‡∏°‡∏•‡πá‡∏î‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡πå‡∏Ç‡πâ‡∏≤‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏°‡∏•‡πá‡∏î\n‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡πå‡∏≠‡∏∑‡πà‡∏ô‡πÇ‡∏î‡∏¢‡∏Å‡∏≤‡∏£‡∏Å‡∏î‡∏¢‡πà‡∏≠‡∏ï‡∏±‡∏ß‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î‡∏õ‡∏•‡∏π‡∏Å‡∏°‡∏±‡∏ô‡∏Å‡πá‡∏à‡∏∞‡∏õ‡∏•‡∏π‡∏Å‡πÉ‡∏´‡πâ‡∏ó‡∏±‡πâ‡∏á‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏•‡∏¢‡∏ó‡∏µ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß\n‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡πá‡∏ï‡∏≠‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ñ‡∏∏‡∏ì‡∏Å‡πá‡∏Å‡∏î‡∏¢‡πà‡∏≠‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡πá‡∏Å‡∏î‡∏ó‡∏∏‡∏ö‡∏°‡∏±‡∏ô‡∏Å‡πá‡∏à‡∏∞‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏¢‡∏ó‡∏µ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô\n‡πÅ‡∏ï‡πà‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏ñ‡∏∑‡∏≠‡πÄ‡∏°‡∏•‡πá‡∏î‡∏´‡∏£‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡∏Ç‡πâ‡∏≤‡∏ß‡πÉ‡∏ô‡∏°‡∏∑‡∏≠‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏ß‡πà‡∏≤‡∏à‡∏∏‡∏î‡∏ô‡∏µ‡πâ‡∏°‡∏±‡∏ô‡∏¢‡∏±‡∏á‡∏ö‡∏±‡∏Ñ‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏°‡∏•‡πá‡∏î‡∏≠‡∏∞‡πÑ‡∏£‡∏Å‡πá‡πÑ‡∏î‡πâ\n‡πÅ‡∏°‡πâ‡πÅ‡∏ï‡πà‡∏ï‡πâ‡∏ô‡∏≠‡πà‡∏≠‡∏ô‡∏Ç‡∏≠‡∏á‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πâ\n\n4.‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà 4\n‡πÄ‡∏°‡∏ô‡∏π‡∏Ñ‡∏ô‡∏á‡∏≤‡∏ô‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏õ‡∏∏‡πà‡∏°‡∏Ç‡∏∏‡∏î‡πÅ‡∏£‡πà‡∏ï‡∏±‡∏î‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πâ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏ï‡∏•‡∏≠‡∏î‡∏à‡∏∞‡∏ô‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡∏Ñ‡∏π‡∏•‡∏î‡∏≤‡∏ß‡∏ô‡πå\n‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏°‡∏±‡∏ô‡πÇ‡∏Å‡∏á‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏≠‡∏î‡∏≠‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏Å‡∏°‡∏ó‡πâ‡∏≤‡∏ó‡∏≤‡∏¢‡∏¢‡∏¥‡πà‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡∏à‡∏∞‡πÑ‡∏î‡πâ‡πÑ‡∏°‡πà‡πÄ‡∏ö‡∏∑‡πà‡∏≠\n‡πÅ‡∏ï‡πà‡πÄ‡∏£‡∏≤‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏ß‡∏•‡∏≤‡πÑ‡∏î‡πâ‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ ‡πÄ‡∏û‡∏ä‡∏£‡∏ó‡∏≠‡∏á:‡∏°‡∏£‡∏Å‡∏ï:‡∏ó‡∏≠‡∏á:‡πÄ‡∏´‡∏•‡πá‡∏Å:‡πÅ‡∏ó‡πà‡∏á‡πÄ‡∏ô‡πÄ‡∏ò‡∏≠‡πÑ‡∏£‡∏ï‡πå\n‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÉ‡∏™‡πà‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà‡∏Å‡πá‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡∏•‡∏∞ 1 ‡∏Å‡πá‡πÑ‡∏î‡πâ \n\n5.‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà 5\n‡πÇ‡∏´‡∏°‡∏î‡∏ï‡πà‡∏≠‡∏™‡∏π‡πâ‡∏°‡∏µ‡∏Ñ‡∏π‡∏•‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô ‡πÇ‡∏´‡∏°‡∏î‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡πÅ‡∏Ñ‡πà‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó\n‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ñ‡∏∑‡∏≠‡∏ï‡∏Å‡∏à‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏π‡∏á‡πÑ‡∏°‡πà‡∏ï‡∏≤‡∏¢‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏≠‡∏∞‡πÑ‡∏£‡∏ó‡∏≥‡∏£‡πâ‡∏≤‡∏¢‡∏ï‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡πÅ‡∏ï‡πà‡∏à‡∏∞‡∏°‡∏µ‡∏Ñ‡∏π‡∏•‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô\n‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏°‡∏±‡∏ô‡πÇ‡∏Å‡∏á‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ‡∏à‡∏ô‡πÑ‡∏°‡πà‡∏ô‡πà‡∏≤‡πÄ‡∏•‡πà‡∏ô ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ß‡∏•‡∏≤‡πÑ‡∏î‡πâ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ ‡πÄ‡∏û‡∏ä‡∏£‡∏ó‡∏≠‡∏á:‡∏°‡∏£‡∏Å‡∏ï:‡∏ó‡∏≠‡∏á:‡πÄ‡∏´‡∏•‡πá‡∏Å:‡πÅ‡∏ó‡πà‡∏á‡πÄ‡∏ô‡πÄ‡∏ò‡∏≠‡πÑ‡∏£‡∏ï‡πå\n‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÉ‡∏™‡πà‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà‡∏Å‡πá‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡∏•‡∏∞ 1 ‡∏Å‡πá‡πÑ‡∏î‡πâ \n\n6.‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà 6\n‡πÇ‡∏´‡∏°‡∏î Admin ‡πÇ‡∏´‡∏°‡∏î‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡πÇ‡∏´‡∏°‡∏î‡∏´‡∏•‡∏±‡∏á‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏´‡∏•‡∏±‡∏á‡∏ö‡πâ‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÄ‡∏•‡∏¢\n‡πÉ‡∏ä‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡πÇ‡∏£‡∏Ñ‡∏ó‡∏µ‡πà‡∏£‡∏π‡πâ‡∏£‡∏´‡∏±‡∏™‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô ‡∏£‡∏´‡∏±‡∏™‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡∏Ñ‡∏∑‡∏≠ : 111 :\n\n7.‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà 7\n‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ô‡∏µ‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡πÅ‡∏•‡πâ‡∏ß‡∏à‡∏∞‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡∏π‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏•‡πá‡∏≠‡∏Å\n‡∏´‡∏£‡∏∑‡∏≠‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡πà‡∏á‡∏°‡∏µ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏ó‡∏∏‡∏Å‡∏ï‡∏±‡∏ß‡πÑ‡∏î‡πâ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ö‡∏î‡∏π‡∏´‡∏•‡∏≠‡∏î‡πÄ‡∏•‡∏∑‡∏≠‡∏î\n‚ÄºÔ∏è‡πÅ‡∏ï‡πà‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ô‡∏µ‡πâ‡∏≠‡∏≤‡∏à‡∏à‡∏∞‡∏ö‡∏±‡∏Ñ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡πÅ‡∏≠‡∏î‡∏≠‡∏≠‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡∏î‡πâ‡∏ß‡∏¢‚ÄºÔ∏è\n‡∏à‡∏∞‡∏ö‡∏±‡∏Ñ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Å‡∏≤‡∏£‡∏î‡∏π‡∏´‡∏•‡∏≠‡∏î‡πÄ‡∏•‡∏∑‡∏≠‡∏î \n‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏ä‡πà‡∏≠‡∏á : C3 ‡∏°‡∏±‡∏á‡∏á‡∏∞ : ‡∏´‡∏£‡∏∑‡∏≠ : C2 ‡∏°‡∏±‡∏á‡∏á‡∏∞\n‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ Add On ‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢‡∏£‡πà‡∏ß‡∏°‡∏î‡πâ‡∏ß‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏°‡∏±‡∏ô‡∏ö‡∏±‡∏Ñ",
    "img": "https://cdn.discordapp.com/attachments/1429104419232022740/1429104567995465728/pack_icon-removebg-preview.png?ex=68f4ecd8&is=68f39b58&hm=719e792efeceef8d430c440ff4c5d76d15469ef909fc4cd39d72cc18dbbcc25a",
    "versions": [
      {
        "name": "v 1.21.+",
        "link": "https://drive.usercontent.google.com/download?id=1VlxTORXj6WCA4xiBa5mw_xXyxy1NTFnC&export=download&authuser=1&confirm=t&uuid=33502b21-0473-4032-a3c2-21f7d6523a45&at=AKSUxGOJolcG9iw2tAChaf8xHl1_:1760792610124"
      }
    ]
  }
];
let isAdmin = false;


    function renderAddons(list) {
      const addonList = document.getElementById('addonList');
      addonList.innerHTML = '';
      list.forEach((addon, idx) => {
        const card = document.createElement('div');
        card.className = 'addon-card';
        card.onclick = () => openDetailModal(idx);
        let html = '';
        if (isAdmin) {
          html += `<button style='position:absolute;top:10px;right:10px;background:#1976d2;color:#fff;border:none;border-radius:6px;padding:4px 14px;font-size:1em;font-weight:bold;z-index:2;cursor:pointer;' onclick='event.stopPropagation(); openEditModal(${idx})'>‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>`;
        }
        html += `
          <img src="${addon.img || ''}" class="addon-img" alt="‡∏£‡∏π‡∏õ Add-on">
          <div class="addon-title">${addon.title || ''}</div>
          <button class="addon-download" onclick="event.stopPropagation(); openDetailModal(${idx})">${(addon.versions && addon.versions.length > 0 && addon.versions[0].name) ? addon.versions[0].name : '‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î'}</button>
        `;
        card.innerHTML = html;
        if (isAdmin) card.style.position = 'relative';
        addonList.appendChild(card);
      });
    }

    function searchAddons() {
      const val = document.getElementById('searchInput').value.trim().toLowerCase();
      if (val === 'adminbeam') {
        isAdmin = true;
        document.getElementById('adminBtn').style.display = 'inline-block';
        document.getElementById('exportBtn').style.display = 'inline-block';
        document.getElementById('codeImportBtn').style.display = 'inline-block';
        renderAddons(addons);
        return;
      }
      const filtered = addons.filter(a => a.title.toLowerCase().includes(val));
      renderAddons(filtered);
    }
// Modal Import Add-on ‡∏î‡πâ‡∏ß‡∏¢‡πÇ‡∏Ñ‡πâ‡∏î
function openCodeImportModal() {
  document.getElementById('codeImportModal').style.display = 'flex';
  document.getElementById('codeImportForm').reset();
  document.getElementById('codeImportTextarea').value = '';
}
function closeCodeImportModal() {
  document.getElementById('codeImportModal').style.display = 'none';
}
document.getElementById('codeImportForm').onsubmit = function(e) {
  e.preventDefault();
  let code = document.getElementById('codeImportTextarea').value.trim();
  if (!code) return alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ß‡∏≤‡∏á‡πÇ‡∏Ñ‡πâ‡∏î‡∏Å‡πà‡∏≠‡∏ô');
  try {
    let validAddons = [];
    // 1. ‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏° parse ‡πÄ‡∏õ‡πá‡∏ô JSON ‡∏Å‡πà‡∏≠‡∏ô (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö addons.json)
    try {
      let parsed = JSON.parse(code);
      if (!Array.isArray(parsed)) parsed = [parsed];
      for (let obj of parsed) {
        if (typeof obj === 'object' && (obj.title || obj.desc || obj.img || obj.versions)) {
          let versions = Array.isArray(obj.versions) ? obj.versions.filter(v => v.name && v.link) : [];
          validAddons.push({
            title: obj.title || '',
            desc: obj.desc || '',
            img: obj.img || '',
            versions: versions
          });
        }
      }
    } catch (jsonErr) {
      // ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà JSON ‡∏´‡∏£‡∏∑‡∏≠ JSON ‡πÑ‡∏°‡πà‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ regex ‡∏î‡∏∂‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞ properties ‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô
      let title = code.match(/"?title"?\s*:\s*(["'])(.*?)\1/);
      let desc = code.match(/"?desc"?\s*:\s*(["'])(.*?)\1/);
      let img = code.match(/"?img"?\s*:\s*(["'])(.*?)\1/);
      // ‡∏´‡∏≤ versions block (‡∏≠‡∏≤‡∏à‡πÑ‡∏°‡πà‡∏õ‡∏¥‡∏î ] ‡∏Å‡πá‡πÑ‡∏î‡πâ)
      let versionsBlock = code.match(/"?versions"?\s*:\s*\[((?:.|\n)*?)(?:\]|$)/);
      let versions = [];
      if (versionsBlock && versionsBlock[1]) {
        let versionRegex = /\{[^\}]*?"?name"?\s*:\s*(["'])(.*?)\1\s*,\s*"?link"?\s*:\s*(["'])(.*?)\3[^\}]*?\}/g;
        let m;
        while ((m = versionRegex.exec(versionsBlock[1])) !== null) {
          versions.push({ name: m[2], link: m[4] });
        }
      }
      if (!title && !desc && !img && versions.length === 0) throw new Error('‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Add-on ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á');
      let addon = {
        title: title ? title[2] : '',
        desc: desc ? desc[2] : '',
        img: img ? img[2] : '',
        versions: versions
      };
      validAddons.push(addon);
    }
    if (validAddons.length === 0) throw new Error('‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Add-on ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á');

  addons = addons.concat(validAddons);
    closeCodeImportModal();
    renderAddons(addons);
    saveAddons();
  } catch (err) {
    alert('‡πÇ‡∏Ñ‡πâ‡∏î‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á: ' + err.message);
  }
};

    function openDetailModal(idx) {
      const addon = addons[idx];
      const modal = document.getElementById('detailModal');
      const content = document.getElementById('modalContent');
      let html = `<button class='close-btn' onclick='closeDetailModal()'>√ó</button>`;
      html += `<img src='${addon.img}' class='addon-img' style='margin-bottom:18px;'>`;
      html += `<div class='addon-title'>${addon.title}</div>`;
      let descHtml = (addon.desc||'')
        .replace(/\\n/g, '<br>')
        .replace(/\r\n|\r|\n/g, '<br>');
      html += `<div class='addon-desc'>${descHtml}</div>`;
      html += `<div class='addon-versions'>`;
      addon.versions.forEach(ver => {
        html += `<button class='version-btn' onclick="window.open('${ver.link}','_blank')">‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡πà‡∏ô ${ver.name}</button>`;
      });
      html += `</div>`;
      content.innerHTML = html;
      modal.style.display = 'flex';
    }
    function closeDetailModal() {
      document.getElementById('detailModal').style.display = 'none';
    }

    function openAddModal() {
      document.getElementById('addModal').style.display = 'flex';
    }
    function closeAddModal() {
      document.getElementById('addModal').style.display = 'none';
      document.getElementById('addForm').reset();
      document.getElementById('versionFields').innerHTML = '';
    }
    function addVersionField() {
      const div = document.createElement('div');
      div.style.display = 'flex';
      div.style.gap = '8px';
      div.style.marginTop = '8px';
      div.innerHTML = `<input type="text" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡πà‡∏ô ‡πÄ‡∏ä‡πà‡∏ô 1.20.1" class="verName">
      <input type="text" placeholder="‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î (Google Drive)" class="verLink">
      <button type="button" style="background:#ff1744;color:#fff;border:none;border-radius:6px;padding:0 10px;cursor:pointer;" onclick="this.parentNode.remove()">‡∏•‡∏ö</button>`;
      document.getElementById('versionFields').appendChild(div);
    }
    // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏°‡∏µ 1 ‡πÅ‡∏ñ‡∏ß‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î modal ‡πÄ‡∏û‡∏¥‡πà‡∏°
    function openAddModal() {
      document.getElementById('addModal').style.display = 'flex';
      document.getElementById('addForm').reset();
      document.getElementById('versionFields').innerHTML = '';
      addVersionField();
    }
    document.getElementById('addForm').onsubmit = function(e) {
      e.preventDefault();
      const title = document.getElementById('newTitle').value.trim();
      const desc = document.getElementById('newDesc').value.trim();
      let img = document.getElementById('newImg').value.trim();
      if (typeof convertDriveImageUrl === 'function') {
        img = convertDriveImageUrl(img);
      }
      const verNames = Array.from(document.querySelectorAll('#versionFields .verName')).map(i => i.value.trim());
      const verLinks = Array.from(document.querySelectorAll('#versionFields .verLink')).map(i => i.value.trim());
      let versions = [];
      for (let i = 0; i < verNames.length; i++) {
        if (verNames[i] || verLinks[i]) {
          versions.push({ name: verNames[i], link: verLinks[i] });
        }
      }
      addons.push({ title, desc, img, versions });
      renderAddons(addons);
      closeAddModal();
      saveAddons();
    };

    // Modal ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Add-on
    let editIdx = null;
    function openEditModal(idx) {
      editIdx = idx;
      const addon = addons[idx];
      document.getElementById('editTitle').value = addon.title || '';
      document.getElementById('editDesc').value = addon.desc || '';
      document.getElementById('editImg').value = addon.img || '';
      const editFields = document.getElementById('editVersionFields');
      editFields.innerHTML = '';
      (addon.versions||[]).forEach(ver => {
        const div = document.createElement('div');
        div.style.display = 'flex';
        div.style.gap = '8px';
        div.style.marginTop = '8px';
        div.innerHTML = `<input type="text" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡πà‡∏ô ‡πÄ‡∏ä‡πà‡∏ô 1.20.1" class="verName" value="${ver.name||''}">
        <input type="text" placeholder="‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î (Google Drive)" class="verLink" value="${ver.link||''}">
        <button type="button" style="background:#ff1744;color:#fff;border:none;border-radius:6px;padding:0 10px;cursor:pointer;" onclick="this.parentNode.remove()">‡∏•‡∏ö</button>`;
        editFields.appendChild(div);
      });
      if ((addon.versions||[]).length === 0) addEditVersionField();
      document.getElementById('editModal').style.display = 'flex';
    }
    function closeEditModal() {
      document.getElementById('editModal').style.display = 'none';
      editIdx = null;
    }
    function addEditVersionField() {
      const div = document.createElement('div');
      div.style.display = 'flex';
      div.style.gap = '8px';
      div.style.marginTop = '8px';
      div.innerHTML = `<input type="text" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡πà‡∏ô ‡πÄ‡∏ä‡πà‡∏ô 1.20.1" class="verName">
      <input type="text" placeholder="‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î (Google Drive)" class="verLink">
      <button type="button" style="background:#ff1744;color:#fff;border:none;border-radius:6px;padding:0 10px;cursor:pointer;" onclick="this.parentNode.remove()">‡∏•‡∏ö</button>`;
      document.getElementById('editVersionFields').appendChild(div);
    }
    document.getElementById('editForm').onsubmit = function(e) {
      e.preventDefault();
      if (editIdx === null) return;
      const title = document.getElementById('editTitle').value.trim();
      const desc = document.getElementById('editDesc').value.trim();
      let img = document.getElementById('editImg').value.trim();
      if (typeof convertDriveImageUrl === 'function') {
        img = convertDriveImageUrl(img);
      }
      const verNames = Array.from(document.querySelectorAll('#editVersionFields .verName')).map(i => i.value.trim());
      const verLinks = Array.from(document.querySelectorAll('#editVersionFields .verLink')).map(i => i.value.trim());
      let versions = [];
      for (let i = 0; i < verNames.length; i++) {
        if (verNames[i] || verLinks[i]) {
          versions.push({ name: verNames[i], link: verLinks[i] });
        }
      }
      addons[editIdx] = { title, desc, img, versions };
      renderAddons(addons);
      closeEditModal();
      saveAddons();
    };

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏•‡∏ö Add-on
function deleteAddon() {
  if (editIdx === null) return;
  addons.splice(editIdx, 1);
  closeEditModal();
  renderAddons(addons);
  saveAddons();
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô Export Add-on
function exportAddons() {
  const jsStr =
    'let addons = ' + JSON.stringify(addons, null, 2) + ' \nlet isAdmin = false;\n';
  const blob = new Blob([jsStr], { type: 'text/javascript' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = 'addons.js';
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  URL.revokeObjectURL(url);
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô Save Add-on (‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°/‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç/‡∏•‡∏ö)
function saveAddons() {
  // ‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á LocalStorage ‡∏≠‡∏µ‡∏Å‡∏ï‡πà‡∏≠‡πÑ‡∏õ
}

// ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Add-on ‡∏à‡∏≤‡∏Å‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ addons ‡∏ó‡∏µ‡πà‡∏ù‡∏±‡∏á‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
window.onload = function() {
  renderAddons(addons);
}

    // Render ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å
    renderAddons(addons);
  </script>
  <script>
document.addEventListener('DOMContentLoaded', function() {
  var siteLogo = document.getElementById('siteLogo');
  if (siteLogo) {
    siteLogo.onclick = function() {
      document.getElementById('ytModal').style.display = 'flex';
    };
  }
});
function closeYtModal() {
  document.getElementById('ytModal').style.display = 'none';
}
</script>
</body>
</html>
