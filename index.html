<!DOCTYPE html>
<html lang="th">
<head>
  <link rel="icon" href="favicon-96x96.png">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î Add-on Minecraft</title>
  <style>
    body {
      background: #181818;
      color: #eee;
      font-family: 'Segoe UI', Arial, sans-serif;
      margin: 0;
      padding: 0;
    }
    header {
      background: #222;
      padding: 20px;
      text-align: center;
      font-size: 2em;
      font-weight: bold;
      letter-spacing: 2px;
      color: #ffb300;
    }
    .search-bar {
      display: flex;
      justify-content: center;
      align-items: center;
      margin: 30px 0 10px 0;
    }
    .search-bar input {
      width: 300px;
      padding: 10px;
      border-radius: 25px 0 0 25px;
      border: none;
      background: #333;
      color: #fff;
      font-size: 1em;
      outline: none;
    }
    .search-bar button {
      padding: 10px 18px;
      border-radius: 0 25px 25px 0;
      border: none;
      background: #444;
      color: #ffb300;
      cursor: pointer;
      font-size: 1em;
    }
    .addon-list {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 30px;
      margin: 30px 0;
    }
    .addon-card {
      background: #232323;
      border-radius: 12px;
      box-shadow: 0 2px 8px #0006;
      width: 320px;
      padding: 18px;
      display: flex;
      flex-direction: column;
      align-items: center;
      transition: box-shadow 0.2s;
      cursor: pointer;
    }
    .addon-card:hover {
      box-shadow: 0 4px 16px #000a;
    }
    .addon-img {
      width: 120px;
      height: 120px;
      object-fit: cover;
      border-radius: 8px;
      margin-bottom: 12px;
      background: #444;
    }
    .addon-title {
      font-size: 1.2em;
      font-weight: bold;
      margin-bottom: 8px;
      color: #ffb300;
      text-align: center;
    }
    .addon-desc {
      font-size: 1em;
      margin-bottom: 12px;
      text-align: center;
      color: #ccc;
    }
    .addon-download {
      background: #ffb300;
      color: #222;
      border: none;
      border-radius: 6px;
      padding: 8px 20px;
      font-size: 1em;
      font-weight: bold;
      cursor: pointer;
      margin-bottom: 6px;
    }
    .admin-btn {
      background: #00c853;
      color: #fff;
      border: none;
      border-radius: 6px;
      padding: 8px 20px;
      font-size: 1em;
      font-weight: bold;
      cursor: pointer;
      margin-top: 18px;
      display: none;
    }
    .modal {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: #000a;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 999;
    }
    .modal-content {
      background: #232323;
      border-radius: 12px;
      padding: 30px;
      min-width: 350px;
      max-width: 90vw;
      max-height: 80vh;
      overflow-y: auto;
      color: #fff;
      box-shadow: 0 2px 16px #000a;
      position: relative;
      opacity: 1;
      transform: scale(1) translateY(0);
      transition: opacity 0.25s, transform 0.25s;
    }
    .modal-content.show-anim {
      animation: modalPopInWin 0.38s cubic-bezier(.25,1.5,.5,1) 1;
    }
    .modal-content.hide-anim {
      animation: modalMinimizeWin 0.32s cubic-bezier(.5,0,1,1) 1;
    }
      /* ‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏ä‡∏±‡πà‡∏ô‡πÄ‡∏î‡πâ‡∏á modal ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î Add-on ‡∏à‡∏≤‡∏Å‡∏õ‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà‡∏Å‡∏î */
      .modal-content.detail-show-anim {
        animation: detailModalPopIn 0.38s cubic-bezier(.25,1.5,.5,1) 1;
      }
      @keyframes detailModalPopIn {
        0% {
          opacity: 0;
          transform: scale(0.7) translate(var(--detail-x,0), var(--detail-y,0));
        }
        60% {
          opacity: 1;
          transform: scale(1.05) translate(0, -12px);
        }
        100% {
          opacity: 1;
          transform: scale(1) translate(0, 0);
        }
      }
      /* ‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏ä‡∏±‡πà‡∏ô‡πÄ‡∏î‡πâ‡∏á modal ‡∏à‡∏≤‡∏Å‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏õ‡∏∏‡πà‡∏°‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô */
      .modal-content.yt-show-anim {
        animation: ytModalPopIn 0.38s cubic-bezier(.25,1.5,.5,1) 1;
      }
      .modal-content.yt-hide-anim {
        animation: ytModalMinimize 0.32s cubic-bezier(.5,0,1,1) 1;
      }
      @keyframes ytModalPopIn {
        0% {
          opacity: 0;
          transform: scale(0.7) translate(var(--yt-x,0), var(--yt-y,0));
        }
        60% {
          opacity: 1;
          transform: scale(1.05) translate(0, -12px);
        }
        100% {
          opacity: 1;
          transform: scale(1) translate(0, 0);
        }
      }
      @keyframes ytModalMinimize {
        0% {
          opacity: 1;
          transform: scale(1) translate(0, 0);
        }
        100% {
          opacity: 0;
          transform: scale(1) translate(0, 0);
        }
      }
    @keyframes modalPopInWin {
      0% {
        opacity: 0;
        transform: scale(0.7) translateY(120px);
      }
      60% {
        opacity: 1;
        transform: scale(1.05) translateY(-12px);
      }
      100% {
        opacity: 1;
        transform: scale(1) translateY(0);
      }
    }
    @keyframes modalMinimizeWin {
      0% {
        opacity: 1;
        transform: scale(1) translateY(0);
      }
      80% {
        opacity: 0.7;
        transform: scale(0.7) translateY(120px);
      }
      100% {
        opacity: 0;
        transform: scale(0.5) translateY(180px);
      }
    }
    .close-btn {
  position: sticky;
  top: 0;
  right: 0;
  float: right;
  margin-top: -8px;
  margin-right: -0px;
  background: #ff1744;
  color: #fff;
  border: none;
  border-radius: 50%;
  width: 32px;
  height: 32px;
  font-size: 1.2em;
  cursor: pointer;
  z-index: 10;
    }
    .addon-versions {
      margin-top: 18px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .version-btn {
      background: #ffb300;
      color: #222;
      border: none;
      border-radius: 6px;
      padding: 8px 20px;
      font-size: 1em;
      font-weight: bold;
      cursor: pointer;
    }
    .add-form {
      display: flex;
      flex-direction: column;
      gap: 12px;
      margin-top: 18px;
    }
    .add-form input, .add-form textarea {
      background: #333;
      color: #fff;
      border: none;
      border-radius: 6px;
      padding: 8px;
      font-size: 1em;
    }
    .add-form label {
      color: #ffb300;
      font-weight: bold;
    }
    .add-form .add-version-btn {
      background: #00c853;
      color: #fff;
      border: none;
      border-radius: 6px;
      padding: 8px 20px;
      font-size: 1em;
      font-weight: bold;
      cursor: pointer;
      margin-top: 8px;
    }
    .add-form .submit-btn {
      background: #ffb300;
      color: #222;
      border: none;
      border-radius: 6px;
      padding: 8px 20px;
      font-size: 1em;
      font-weight: bold;
      cursor: pointer;
      margin-top: 12px;
    }
  </style>
</head>
<body>
  <!-- Modal ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏™‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡∏õ‡∏±‡∏ç‡∏ç‡∏≤ -->
  <div class="modal" id="ipModal" style="display:none;z-index:2000;">
    <div class="modal-content" style="min-width:320px;max-width:95vw;text-align:center;">
      <div style="font-size:1.2em;font-weight:bold;color:#ffb300;margin-bottom:18px;">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ñ‡∏≤‡∏£‡∏û‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏™‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡∏õ‡∏±‡∏ç‡∏ç‡∏≤‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡∏≠‡∏∑‡πà‡∏ô</div>
      <div style="color:#fff;margin-bottom:18px;">‡∏´‡πâ‡∏≤‡∏°‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏´‡∏£‡∏∑‡∏≠‡∏î‡∏π‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå‡∏ô‡∏µ‡πâ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï</div>
      <button onclick="closeIpModal()" style="background:#ffb300;color:#222;border:none;border-radius:6px;padding:8px 32px;font-size:1.1em;font-weight:bold;cursor:pointer;">‡∏£‡∏±‡∏ö‡∏ó‡∏£‡∏≤‡∏ö</button>
    </div>
  </div>
  <header style="display:flex;align-items:center;justify-content:center;gap:18px;">
    <img id="siteLogo" src="https://yt3.googleusercontent.com/ZlpQ7tdER2Gs-vWQ4OfRQaVCxaB1cakpwc4ZyX_p3fJtqsWJ-_HdZd6D9sk3W_RdsaOzZQ67xMA=s72-c-k-c0x00ffffff-no-rj" alt="‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå" style="width:48px;height:48px;border-radius:50px;object-fit:cover;cursor:pointer;">
    <span style="position:relative; top:-5px;">Add-on Minecraft</span>
  </header>
  <!-- Modal YouTube Channel Selector -->
  <div class="modal" id="ytModal" style="display:none">
    <div class="modal-content" style="min-width:320px;max-width:95vw;text-align:center;">
      <button class="close-btn" onclick="closeYtModal()">√ó</button>
      <div style="font-size:1.2em;font-weight:bold;color:#ffb300;margin-bottom:18px;">‡∏ä‡πà‡∏≠‡∏á YouTube ‡∏ú‡∏π‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå</div>
      <div style="display:flex;justify-content:center;gap:32px;">
        <button onclick="window.open('https://www.youtube.com/@C2manga/videos','_blank')" style="background:none;border:none;cursor:pointer;">
          <img src="https://yt3.googleusercontent.com/ZlpQ7tdER2Gs-vWQ4OfRQaVCxaB1cakpwc4ZyX_p3fJtqsWJ-_HdZd6D9sk3W_RdsaOzZQ67xMA=s72-c-k-c0x00ffffff-no-rj" alt="C2manga" style="width:64px;height:64px;border-radius:50px;object-fit:cover;box-shadow:0 2px 8px #0006;">
          <div style="margin-top:8px;color:#fff;font-weight:bold;">C2manga</div>
        </button>
        <button onclick="window.open('https://www.youtube.com/@C3Manga','_blank')" style="background:none;border:none;cursor:pointer;">
          <img src="https://yt3.googleusercontent.com/B5CW5SIcNIckA-nNW9WvKadamSKa0c1O6DYxcC5Scitv50KJj-kVInUViTfZmUX0Lwj76DAouA=s72-c-k-c0x00ffffff-no-rj" alt="C3Manga" style="width:64px;height:64px;border-radius:50px;object-fit:cover;box-shadow:0 2px 8px #0006;">
          <div style="margin-top:8px;color:#fff;font-weight:bold;">C3Manga</div>
        </button>
      </div>
    </div>
  </div>
  <div class="search-bar">
  <input type="text" id="searchInput" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ Add-on..." onkeydown="if(event.key==='Enter'){searchAddons();}" onkeyup="searchAddons()">
  <button onclick="searchAddons()">üîç</button>
  </div>
  <button class="admin-btn" id="adminBtn" onclick="openAddModal()" style="position:fixed;top:5px;right:24px;z-index:1001;">+ ‡πÄ‡∏û‡∏¥‡πà‡∏° Add-on ‡πÉ‡∏´‡∏°‡πà</button>
  <button class="admin-btn" id="exportBtn" onclick="exportAddons()" style="position:fixed;top:50px;right:24px;z-index:1001;display:none;background:#1976d2;">Export Add-on</button>
  <button class="admin-btn" id="codeImportBtn" onclick="openCodeImportModal()" style="position:fixed;top:95px;right:24px;z-index:1001;display:none;background:#8e24aa;">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏î‡πâ‡∏ß‡∏¢‡πÇ‡∏Ñ‡πâ‡∏î</button>
  <!-- Modal ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Import Add-on ‡∏î‡πâ‡∏ß‡∏¢‡πÇ‡∏Ñ‡πâ‡∏î -->
  <div class="modal" id="codeImportModal" style="display:none">
    <div class="modal-content">
      <button class="close-btn" onclick="closeCodeImportModal()">√ó</button>
      <form class="add-form" id="codeImportForm">
        <label>‡∏ß‡∏≤‡∏á‡πÇ‡∏Ñ‡πâ‡∏î Add-on (Array ‡∏´‡∏£‡∏∑‡∏≠ Object)</label>
        <textarea id="codeImportTextarea" rows="10" style="font-family:monospace;"></textarea>
        <button type="submit" class="submit-btn">‡πÄ‡∏û‡∏¥‡πà‡∏° Add-on ‡∏à‡∏≤‡∏Å‡πÇ‡∏Ñ‡πâ‡∏î</button>
      </form>
    </div>
  </div>

  <div class="addon-list" id="addonList"></div>

  <!-- Modal ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Add-on -->
  <div class="modal" id="editModal" style="display:none">
    <div class="modal-content">
  <button class="close-btn" onclick="closeEditModal()">√ó</button>
  <button id="deleteAddonBtn" style="position:absolute;top:12px;left:18px;background:#ff1744;color:#fff;border:none;border-radius:6px;padding:6px 18px;font-size:1em;font-weight:bold;cursor:pointer;z-index:2;" onclick="deleteAddon()">‡∏•‡∏ö</button>
  <form class="add-form" id="editForm">
        <label>‡∏ä‡∏∑‡πà‡∏≠ Add-on</label>
        <input type="text" id="editTitle">
        <label>‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢</label>
        <textarea id="editDesc" rows="3"></textarea>
        <label>‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û (URL)</label>
        <input type="text" id="editImg">
        <label>‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡πà‡∏ô Minecraft (‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏•‡∏≤‡∏¢‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡πà‡∏ô‡πÑ‡∏î‡πâ)</label>
        <div id="editVersionFields"></div>
        <button type="button" class="add-version-btn" onclick="addEditVersionField()">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡πà‡∏ô</button>
        <button type="submit" class="submit-btn">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
      </form>
    </div>
  </div>

  <!-- Modal ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î Add-on -->
  <div class="modal" id="detailModal" style="display:none">
    <div class="modal-content" id="modalContent"></div>
  </div>

  <!-- Modal ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏û‡∏¥‡πà‡∏° Add-on -->
  <div class="modal" id="addModal" style="display:none">
    <div class="modal-content">
      <button class="close-btn" onclick="closeAddModal()">√ó</button>
      <form class="add-form" id="addForm">
        <label>‡∏ä‡∏∑‡πà‡∏≠ Add-on</label>
        <input type="text" id="newTitle">
        <label>‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢</label>
        <textarea id="newDesc" rows="3"></textarea>
        <label>‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û (URL)</label>
        <input type="text" id="newImg">
        <label>‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡πà‡∏ô Minecraft (‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏•‡∏≤‡∏¢‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡πà‡∏ô‡πÑ‡∏î‡πâ)</label>
        <div id="versionFields"></div>
        <button type="button" class="add-version-btn" onclick="addVersionField()">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡πà‡∏ô</button>
        <button type="submit" class="submit-btn">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å Add-on</button>
      </form>
    </div>
  </div>

  <script>
// ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏¥‡∏î DevTools ‡πÅ‡∏•‡∏∞‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏™‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡∏õ‡∏±‡∏ç‡∏ç‡∏≤
function showIpModal() {
  document.getElementById('ipModal').style.display = 'flex';
}
function closeIpModal() {
  document.getElementById('ipModal').style.display = 'none';
}
document.addEventListener('contextmenu', function(e) {
  e.preventDefault();
});
document.addEventListener('keydown', function(e) {
  // F12
  if (e.key === 'F12') {
    e.preventDefault();
    showIpModal();
    return false;
  }
  // Ctrl+Shift+I ‡∏´‡∏£‡∏∑‡∏≠ Ctrl+Shift+J
  if ((e.ctrlKey && e.shiftKey && (e.key === 'I' || e.key === 'J')) ||
      (e.ctrlKey && e.key === 'U')) {
    e.preventDefault();
    showIpModal();
    return false;
  }
});
// ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö DevTools ‡∏ñ‡∏π‡∏Å‡πÄ‡∏õ‡∏¥‡∏î (‡πÅ‡∏ö‡∏ö‡∏á‡πà‡∏≤‡∏¢)
let devtoolsOpen = false;
setInterval(function() {
  const threshold = 160;
  if (window.outerWidth - window.innerWidth > threshold || window.outerHeight - window.innerHeight > threshold) {
    if (!devtoolsOpen) {
      devtoolsOpen = true;
      showIpModal();
    }
  } else {
    devtoolsOpen = false;
  }
}, 1000);

let addons = [
  {
    "title": "C2 The World v.1.1.1",
    "desc": "‚Äî---------------------------\n‡πÅ‡∏≠‡∏î‡∏≠‡∏≠‡∏ô‡∏ô‡∏µ‡πâ ‡∏°‡∏µ‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡πà‡∏≤ C2 the world \n‡∏ú‡∏π‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á C2‡∏°‡∏±‡∏á‡∏á‡∏∞ \n‡∏ä‡πà‡∏≠‡∏á YouTube  C2‡∏°‡∏±‡∏á‡∏á‡∏∞\n‚Äî---------------------------\n\n‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏∏‡∏ì‡∏•‡∏á‡πÅ‡∏≠‡∏î‡∏≠‡∏≠‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡πÄ‡∏´‡πá‡∏ô‡πÑ‡∏≠‡πÄ‡∏ó‡∏°‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏∏‡∏ì‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏•‡∏Å\nhttps://media.discordapp.net/attachments/1429104419232022740/1429183309468139650/image.png?ex=68f5362d&is=68f3e4ad&hm=36c84c945491d7ffc8c7d455b0eafa2fe8f7aaa1248442bfff01831733c7d2a9&=&format=webp&quality=lossless&width=1617&height=856\n\n1. ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà 1\n‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏à‡∏∏‡∏î‡∏ß‡∏≤‡∏£‡πå‡∏õ‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡πÑ‡∏î‡πâ‡∏ß‡πà‡∏≤‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏ß‡∏≤‡∏£‡πå‡∏õ‡πÑ‡∏õ‡∏à‡∏∏‡∏î‡πÑ‡∏´‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏ß‡πâ\nhttps://cdn.discordapp.com/attachments/1429104419232022740/1429183451667370055/image.png?ex=68f5364f&is=68f3e4cf&hm=c55c2f6756514446b464ffd1314981e4a4eac38ee44d740a3972732046235cf0\n\n2.‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà 2\n‡∏ï‡∏•‡∏≤‡∏î Safe Zone ‡πÄ‡∏£‡∏≤‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ß‡∏≤‡∏£‡πå‡∏õ‡∏°‡∏≤‡∏à‡∏∏‡∏î‡∏ô‡∏µ‡πâ‡πÑ‡∏î‡πâ‡∏Å‡πá‡∏ï‡πà‡∏≠‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡πÅ‡∏≠‡∏î‡∏≠‡∏≠‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡∏ï‡∏±‡πâ‡∏á\n‡∏Ñ‡πà‡∏≤‡πÑ‡∏ß‡πâ \nhttps://media.discordapp.net/attachments/1429104419232022740/1429183742093820095/image.png?ex=68f53695&is=68f3e515&hm=eeb8e6e5aaabd24e1218c007bec1bc9940db61a2c82c51fab5cafce445703f0a&=&format=webp&quality=lossless&width=1645&height=856\n\n3.‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà 3\n‡πÇ‡∏´‡∏°‡∏î‡∏ó‡∏≥‡∏ü‡∏≤‡∏£‡πå‡∏°‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏≤‡∏û‡∏£‡∏±‡πà‡∏ß‡∏î‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏ó‡∏≥‡∏ü‡∏≤‡∏£‡πå‡∏°‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ñ‡∏∑‡∏≠‡πÄ‡∏°‡∏•‡πá‡∏î‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡πå‡∏Ç‡πâ‡∏≤‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏°‡∏•‡πá‡∏î\n‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡πå‡∏≠‡∏∑‡πà‡∏ô‡πÇ‡∏î‡∏¢‡∏Å‡∏≤‡∏£‡∏Å‡∏î‡∏¢‡πà‡∏≠‡∏ï‡∏±‡∏ß‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î‡∏õ‡∏•‡∏π‡∏Å‡∏°‡∏±‡∏ô‡∏Å‡πá‡∏à‡∏∞‡∏õ‡∏•‡∏π‡∏Å‡πÉ‡∏´‡πâ‡∏ó‡∏±‡πâ‡∏á‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏•‡∏¢‡∏ó‡∏µ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß\n‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡πá‡∏ï‡∏≠‡∏ô‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ñ‡∏∏‡∏ì‡∏Å‡πá‡∏Å‡∏î‡∏¢‡πà‡∏≠‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡πá‡∏Å‡∏î‡∏ó‡∏∏‡∏ö‡∏°‡∏±‡∏ô‡∏Å‡πá‡∏à‡∏∞‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏¢‡∏ó‡∏µ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô\n‡πÅ‡∏ï‡πà‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏ñ‡∏∑‡∏≠‡πÄ‡∏°‡∏•‡πá‡∏î‡∏´‡∏£‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡∏Ç‡πâ‡∏≤‡∏ß‡πÉ‡∏ô‡∏°‡∏∑‡∏≠‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏ß‡πà‡∏≤‡∏à‡∏∏‡∏î‡∏ô‡∏µ‡πâ‡∏°‡∏±‡∏ô‡∏¢‡∏±‡∏á‡∏ö‡∏±‡∏Ñ‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏°‡∏•‡πá‡∏î‡∏≠‡∏∞‡πÑ‡∏£‡∏Å‡πá‡πÑ‡∏î‡πâ\n‡πÅ‡∏°‡πâ‡πÅ‡∏ï‡πà‡∏ï‡πâ‡∏ô‡∏≠‡πà‡∏≠‡∏ô‡∏Ç‡∏≠‡∏á‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πâ\nhttps://cdn.discordapp.com/attachments/1429104419232022740/1429184127789301850/image.png?ex=68f536f1&is=68f3e571&hm=6a3cb02e1939be59f446a698b4526f2552a114576141ea7588393dce494b8c81\nhttps://cdn.discordapp.com/attachments/1429104419232022740/1429184127789301850/image.png?ex=68f536f1&is=68f3e571&hm=6a3cb02e1939be59f446a698b4526f2552a114576141ea7588393dce494b8c81\n\n4.‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà 4\n‡πÄ‡∏°‡∏ô‡∏π‡∏Ñ‡∏ô‡∏á‡∏≤‡∏ô‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏õ‡∏∏‡πà‡∏°‡∏Ç‡∏∏‡∏î‡πÅ‡∏£‡πà‡∏ï‡∏±‡∏î‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πâ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏ï‡∏•‡∏≠‡∏î‡∏à‡∏∞‡∏ô‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡∏Ñ‡∏π‡∏•‡∏î‡∏≤‡∏ß‡∏ô‡πå\n‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏°‡∏±‡∏ô‡πÇ‡∏Å‡∏á‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏≠‡∏î‡∏≠‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏Å‡∏°‡∏ó‡πâ‡∏≤‡∏ó‡∏≤‡∏¢‡∏¢‡∏¥‡πà‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡∏à‡∏∞‡πÑ‡∏î‡πâ‡πÑ‡∏°‡πà‡πÄ‡∏ö‡∏∑‡πà‡∏≠\n‡πÅ‡∏ï‡πà‡πÄ‡∏£‡∏≤‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏ß‡∏•‡∏≤‡πÑ‡∏î‡πâ‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ ‡πÄ‡∏û‡∏ä‡∏£‡∏ó‡∏≠‡∏á:‡∏°‡∏£‡∏Å‡∏ï:‡∏ó‡∏≠‡∏á:‡πÄ‡∏´‡∏•‡πá‡∏Å:‡πÅ‡∏ó‡πà‡∏á‡πÄ‡∏ô‡πÄ‡∏ò‡∏≠‡πÑ‡∏£‡∏ï‡πå\n‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÉ‡∏™‡πà‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà‡∏Å‡πá‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡∏•‡∏∞ 1 ‡∏Å‡πá‡πÑ‡∏î‡πâ \nhttps://media.discordapp.net/attachments/1429104419232022740/1429185082471481475/2025-10-19_021014.png?ex=68f537d4&is=68f3e654&hm=856b64d113799be96d7f9a7795e3e9c5601056fd162b2e9216c07d18ffa445f3&=&format=webp&quality=lossless&width=1620&height=856\nhttps://media.discordapp.net/attachments/1429104419232022740/1429184980310954267/image.png?ex=68f537bc&is=68f3e63c&hm=a7a43d15036dd0bae2f44becb70712d1fc475fc8c31f19a5560335873b321d70&=&format=webp&quality=lossless&width=1644&height=856\n\n5.‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà 5\n‡πÇ‡∏´‡∏°‡∏î‡∏ï‡πà‡∏≠‡∏™‡∏π‡πâ‡∏°‡∏µ‡∏Ñ‡∏π‡∏•‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô ‡πÇ‡∏´‡∏°‡∏î‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡πÅ‡∏Ñ‡πà‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó\n‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ñ‡∏∑‡∏≠‡∏ï‡∏Å‡∏à‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏π‡∏á‡πÑ‡∏°‡πà‡∏ï‡∏≤‡∏¢‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏≠‡∏∞‡πÑ‡∏£‡∏ó‡∏≥‡∏£‡πâ‡∏≤‡∏¢‡∏ï‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡πÅ‡∏ï‡πà‡∏à‡∏∞‡∏°‡∏µ‡∏Ñ‡∏π‡∏•‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô\n‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏°‡∏±‡∏ô‡πÇ‡∏Å‡∏á‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ‡∏à‡∏ô‡πÑ‡∏°‡πà‡∏ô‡πà‡∏≤‡πÄ‡∏•‡πà‡∏ô ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ß‡∏•‡∏≤‡πÑ‡∏î‡πâ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ ‡πÄ‡∏û‡∏ä‡∏£‡∏ó‡∏≠‡∏á:‡∏°‡∏£‡∏Å‡∏ï:‡∏ó‡∏≠‡∏á:‡πÄ‡∏´‡∏•‡πá‡∏Å:‡πÅ‡∏ó‡πà‡∏á‡πÄ‡∏ô‡πÄ‡∏ò‡∏≠‡πÑ‡∏£‡∏ï‡πå\n‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÉ‡∏™‡πà‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà‡∏Å‡πá‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡∏•‡∏∞ 1 ‡∏Å‡πá‡πÑ‡∏î‡πâ \nhttps://cdn.discordapp.com/attachments/1429104419232022740/1429185305595875398/image.png?ex=68f53809&is=68f3e689&hm=e2fafd3e465840e9493651595f66c0fb95461d79aa3300a142cfdfaf481a51d0\n\n6.‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà 6\n‡πÇ‡∏´‡∏°‡∏î Admin ‡πÇ‡∏´‡∏°‡∏î‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡πÇ‡∏´‡∏°‡∏î‡∏´‡∏•‡∏±‡∏á‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏´‡∏•‡∏±‡∏á‡∏ö‡πâ‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÄ‡∏•‡∏¢\n‡πÉ‡∏ä‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡πÇ‡∏£‡∏Ñ‡∏ó‡∏µ‡πà‡∏£‡∏π‡πâ‡∏£‡∏´‡∏±‡∏™‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô \n‡∏£‡∏´‡∏±‡∏™‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡∏Ñ‡∏∑‡∏≠ : 111 :\nhttps://media.discordapp.net/attachments/1429104419232022740/1429462718053613588/image.png?ex=68f63a66&is=68f4e8e6&hm=3630be80c8a6f8bce6097faebd3c2529d215f1beab9556fa95e6cb500124308c&=&format=webp&quality=lossless&width=1654&height=856\n\n7.‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà 7\n‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ô‡∏µ‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡πÅ‡∏•‡πâ‡∏ß‡∏à‡∏∞‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡∏π‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏•‡πá‡∏≠‡∏Å\n‡∏´‡∏£‡∏∑‡∏≠‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡πà‡∏á‡∏°‡∏µ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏ó‡∏∏‡∏Å‡∏ï‡∏±‡∏ß‡πÑ‡∏î‡πâ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ö‡∏î‡∏π‡∏´‡∏•‡∏≠‡∏î‡πÄ‡∏•‡∏∑‡∏≠‡∏î\n‚ÄºÔ∏è‡πÅ‡∏ï‡πà‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ô‡∏µ‡πâ‡∏≠‡∏≤‡∏à‡∏à‡∏∞‡∏ö‡∏±‡∏Ñ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡πÅ‡∏≠‡∏î‡∏≠‡∏≠‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡∏î‡πâ‡∏ß‡∏¢‚ÄºÔ∏è\n‡∏à‡∏∞‡∏ö‡∏±‡∏Ñ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Å‡∏≤‡∏£‡∏î‡∏π‡∏´‡∏•‡∏≠‡∏î‡πÄ‡∏•‡∏∑‡∏≠‡∏î \n‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏ä‡πà‡∏≠‡∏á : C3 ‡∏°‡∏±‡∏á‡∏á‡∏∞ : ‡∏´‡∏£‡∏∑‡∏≠ : C2 ‡∏°‡∏±‡∏á‡∏á‡∏∞\n‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ Add On ‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢‡∏£‡πà‡∏ß‡∏°‡∏î‡πâ‡∏ß‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏°‡∏±‡∏ô‡∏ö‡∏±‡∏Ñ\nhttps://media.discordapp.net/attachments/1429104419232022740/1429185407739760803/image.png?ex=68f5e0e2&is=68f48f62&hm=404130c13aab7cfd0d99dabd94ff5a4dd3b49d846684100b199aa7933afb30ec&=&format=webp&quality=lossless&width=1622&height=856",
    "img": "https://cdn.discordapp.com/attachments/1429104419232022740/1429104567995465728/pack_icon-removebg-preview.png?ex=68f4ecd8&is=68f39b58&hm=719e792efeceef8d430c440ff4c5d76d15469ef909fc4cd39d72cc18dbbcc25a",
    "versions": [
      {
        "name": "v 1.21.+",
        "link": "https://drive.usercontent.google.com/download?id=1VlxTORXj6WCA4xiBa5mw_xXyxy1NTFnC&export=download&authuser=1&confirm=t&uuid=33502b21-0473-4032-a3c2-21f7d6523a45&at=AKSUxGOJolcG9iw2tAChaf8xHl1_:1760792610124"
      }
    ]
  }
];
let isAdmin = false;


    function renderAddons(list) {
      const addonList = document.getElementById('addonList');
      addonList.innerHTML = '';
      list.forEach((addon, idx) => {
        const card = document.createElement('div');
        card.className = 'addon-card';
        card.onclick = () => openDetailModal(idx);
        let html = '';
        if (isAdmin) {
          html += `<button style='position:absolute;top:10px;right:10px;background:#1976d2;color:#fff;border:none;border-radius:6px;padding:4px 14px;font-size:1em;font-weight:bold;z-index:2;cursor:pointer;' onclick='event.stopPropagation(); openEditModal(${idx})'>‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>`;
        }
        html += `
          <img src="${addon.img || ''}" class="addon-img" alt="‡∏£‡∏π‡∏õ Add-on">
          <div class="addon-title">${addon.title || ''}</div>
          <button class="addon-download" onclick="event.stopPropagation(); openDetailModal(${idx})">${(addon.versions && addon.versions.length > 0 && addon.versions[0].name) ? addon.versions[0].name : '‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î'}</button>
        `;
        card.innerHTML = html;
        if (isAdmin) card.style.position = 'relative';
        addonList.appendChild(card);
      });
    }

    function searchAddons() {
  let val = document.getElementById('searchInput').value.trim().toLowerCase();
  const valNoSpace = val.replace(/\s+/g, '');
      if (val === 'adminbeam') {
        isAdmin = true;
        document.getElementById('adminBtn').style.display = 'inline-block';
        document.getElementById('exportBtn').style.display = 'inline-block';
        document.getElementById('codeImportBtn').style.display = 'inline-block';
        renderAddons(addons);
        return;
      }
      const filtered = addons.filter(a => {
        // ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏à‡∏≤‡∏Å‡∏ä‡∏∑‡πà‡∏≠ Add-on, ‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡πà‡∏ô ‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡πÅ‡∏ö‡∏ö‡πÑ‡∏°‡πà‡πÄ‡∏ß‡πâ‡∏ô‡∏ß‡∏£‡∏£‡∏Ñ‡πÅ‡∏•‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏ô‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ç‡∏∂‡πâ‡∏ô)
        const title = (a.title || '').toLowerCase();
        const titleNoSpace = title.replace(/\s+/g, '');
        const desc = (a.desc || '').toLowerCase();
        const descNoSpace = desc.replace(/\s+/g, '');
        // ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏Ñ‡∏≥‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÉ‡∏ô‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏ó‡∏∏‡∏Å‡∏à‡∏∏‡∏î
        const descMatch = desc.indexOf(val) !== -1 || descNoSpace.indexOf(valNoSpace) !== -1;
        const titleMatch = title.indexOf(val) !== -1 || titleNoSpace.indexOf(valNoSpace) !== -1;
        const versionMatch = Array.isArray(a.versions) && a.versions.some(v => {
          const verName = (v.name || '').toLowerCase();
          const verNameNoSpace = verName.replace(/\s+/g, '');
          return verName.indexOf(val) !== -1 || verNameNoSpace.indexOf(valNoSpace) !== -1;
        });
        return titleMatch || versionMatch || descMatch;
      });
      renderAddons(filtered);
    }
// Modal Import Add-on ‡∏î‡πâ‡∏ß‡∏¢‡πÇ‡∏Ñ‡πâ‡∏î
function openCodeImportModal() {
  document.getElementById('codeImportModal').style.display = 'flex';
  document.getElementById('codeImportForm').reset();
  document.getElementById('codeImportTextarea').value = '';
}
function closeCodeImportModal() {
  document.getElementById('codeImportModal').style.display = 'none';
}
document.getElementById('codeImportForm').onsubmit = function(e) {
  e.preventDefault();
  let code = document.getElementById('codeImportTextarea').value.trim();
  if (!code) return alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ß‡∏≤‡∏á‡πÇ‡∏Ñ‡πâ‡∏î‡∏Å‡πà‡∏≠‡∏ô');
  try {
    let validAddons = [];
    // 1. ‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏° parse ‡πÄ‡∏õ‡πá‡∏ô JSON ‡∏Å‡πà‡∏≠‡∏ô (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö addons.json)
    try {
      let parsed = JSON.parse(code);
      if (!Array.isArray(parsed)) parsed = [parsed];
      for (let obj of parsed) {
        if (typeof obj === 'object' && (obj.title || obj.desc || obj.img || obj.versions)) {
          let versions = Array.isArray(obj.versions) ? obj.versions.filter(v => v.name && v.link) : [];
          validAddons.push({
            title: obj.title || '',
            desc: obj.desc || '',
            img: obj.img || '',
            versions: versions
          });
        }
      }
    } catch (jsonErr) {
      // ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà JSON ‡∏´‡∏£‡∏∑‡∏≠ JSON ‡πÑ‡∏°‡πà‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ regex ‡∏î‡∏∂‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞ properties ‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô
      let title = code.match(/"?title"?\s*:\s*(["'])(.*?)\1/);
      let desc = code.match(/"?desc"?\s*:\s*(["'])(.*?)\1/);
      let img = code.match(/"?img"?\s*:\s*(["'])(.*?)\1/);
      // ‡∏´‡∏≤ versions block (‡∏≠‡∏≤‡∏à‡πÑ‡∏°‡πà‡∏õ‡∏¥‡∏î ] ‡∏Å‡πá‡πÑ‡∏î‡πâ)
      let versionsBlock = code.match(/"?versions"?\s*:\s*\[((?:.|\n)*?)(?:\]|$)/);
      let versions = [];
      if (versionsBlock && versionsBlock[1]) {
        let versionRegex = /\{[^\}]*?"?name"?\s*:\s*(["'])(.*?)\1\s*,\s*"?link"?\s*:\s*(["'])(.*?)\3[^\}]*?\}/g;
        let m;
        while ((m = versionRegex.exec(versionsBlock[1])) !== null) {
          versions.push({ name: m[2], link: m[4] });
        }
      }
      if (!title && !desc && !img && versions.length === 0) throw new Error('‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Add-on ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á');
      let addon = {
        title: title ? title[2] : '',
        desc: desc ? desc[2] : '',
        img: img ? img[2] : '',
        versions: versions
      };
      validAddons.push(addon);
    }
    if (validAddons.length === 0) throw new Error('‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Add-on ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á');

  addons = addons.concat(validAddons);
    closeCodeImportModal();
    renderAddons(addons);
    saveAddons();
  } catch (err) {
    alert('‡πÇ‡∏Ñ‡πâ‡∏î‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á: ' + err.message);
  }
};

    function openDetailModal(idx) {
      const addon = addons[idx];
      const modal = document.getElementById('detailModal');
      const content = document.getElementById('modalContent');
      let html = `<button class='close-btn' onclick='closeDetailModal()'>√ó</button>`;
      html += `<img src='${addon.img}' class='addon-img' style='margin-bottom:18px;'>`;
      html += `<div class='addon-title'>${addon.title}</div>`;
      // ‡∏™‡∏£‡πâ‡∏≤‡∏á descHtml ‡πÇ‡∏î‡∏¢‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÅ‡∏•‡∏∞‡∏•‡∏¥‡∏á‡∏Å‡πå YouTube ‡∏î‡πâ‡∏ß‡∏¢‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏¢‡∏Å‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏à‡∏∏‡∏î
      let descHtml = (addon.desc||'')
        // ‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û
        .replace(/(https?:\/\/(?:[^\s"'\n\r]+?\.(?:png|jpg|jpeg|gif|webp|bmp|svg)(?:\?[^\s"'\n\r]*)?))/gi, function(url) {
          return `<button class="desc-img-btn" data-img-url="${url}" style="background:#444;color:#00c853;border:none;border-radius:6px;padding:2px 12px;margin:4px 0;cursor:pointer;">‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</button>`;
        })
        // ‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏•‡∏¥‡∏õ YouTube
        .replace(/(https?:\/\/(?:www\.|m\.)?(?:youtube\.com\/watch\?v=|youtu\.be\/)([A-Za-z0-9_-]{11}))/gi, function(url, full, vid) {
          return `<button class="desc-yt-btn" data-yt-url="${url}" data-yt-id="${vid}" style="background:#222;color:#ff1744;border:none;border-radius:6px;padding:2px 12px;margin:4px 0;cursor:pointer;">‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏•‡∏¥‡∏õ YouTube</button>`;
        })
        .replace(/\\n/g, '<br>')
        .replace(/\r\n|\r|\n/g, '<br>');
      html += `<div class='addon-desc' id='addonDescArea'>${descHtml}</div>`;
      html += `<div class='addon-versions'>`;
      addon.versions.forEach(ver => {
        html += `<button class='version-btn' onclick="window.open('${ver.link}','_blank')">‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡πà‡∏ô ${ver.name}</button>`;
      });
      html += `</div>`;
      content.innerHTML = html;
      // ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡πÅ‡∏™‡∏î‡∏á/‡∏ã‡πà‡∏≠‡∏ô‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÅ‡∏•‡∏∞‡∏Ñ‡∏•‡∏¥‡∏õ YouTube ‡πÅ‡∏ö‡∏ö‡πÅ‡∏¢‡∏Å‡∏õ‡∏∏‡πà‡∏°
      const descArea = document.getElementById('addonDescArea');
      // ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û
      descArea.querySelectorAll('.desc-img-btn').forEach(btn => {
        btn.onclick = function() {
          if (btn.dataset.shown === '1') {
            if (btn.nextSibling && btn.nextSibling.className === 'desc-img-container') {
              btn.nextSibling.remove();
            }
            btn.innerHTML = '‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û';
            btn.dataset.shown = '';
            btn.style.display = '';
          } else {
            const container = document.createElement('div');
            container.className = 'desc-img-container';
            container.style.display = 'flex';
            container.style.flexDirection = 'column';
            container.style.alignItems = 'center';
            container.style.justifyContent = 'center';
            container.style.margin = '8px 0';
            const img = document.createElement('img');
            img.src = btn.getAttribute('data-img-url');
            img.style.maxWidth = '400px';
            img.style.width = '100%';
            img.style.height = 'auto';
            img.style.maxHeight = '250px';
            img.style.borderRadius = '8px';
            img.style.boxShadow = '0 2px 8px #0006';
            img.className = 'desc-img-preview';
            // ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏Ç‡∏¢‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÄ‡∏ï‡πá‡∏°‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠
            img.style.cursor = 'zoom-in';
            img.onclick = function(e) {
              e.stopPropagation();
              // ‡∏™‡∏£‡πâ‡∏≤‡∏á modal ‡πÄ‡∏ï‡πá‡∏°‡∏à‡∏≠
              const fullscreenModal = document.createElement('div');
              fullscreenModal.className = 'img-fullscreen-modal';
              fullscreenModal.style.position = 'fixed';
              fullscreenModal.style.top = '0';
              fullscreenModal.style.left = '0';
              fullscreenModal.style.width = '100vw';
              fullscreenModal.style.height = '100vh';
              fullscreenModal.style.background = 'rgba(0,0,0,0.95)';
              fullscreenModal.style.display = 'flex';
              fullscreenModal.style.alignItems = 'center';
              fullscreenModal.style.justifyContent = 'center';
              fullscreenModal.style.zIndex = '99999';
              fullscreenModal.style.cursor = 'zoom-out';
              // ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÉ‡∏´‡∏ç‡πà
              const bigImg = document.createElement('img');
              bigImg.src = img.src;
              bigImg.style.maxWidth = '96vw';
              bigImg.style.maxHeight = '96vh';
              bigImg.style.borderRadius = '12px';
              bigImg.style.boxShadow = '0 4px 32px #000a';
              bigImg.style.background = '#222';
              bigImg.style.cursor = 'zoom-out';
              fullscreenModal.appendChild(bigImg);
              // ‡∏õ‡∏¥‡∏î modal ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏•‡∏¥‡∏Å‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô (‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏° Back)
              function closeFullscreen() {
                document.body.removeChild(fullscreenModal);
              }
              fullscreenModal.onclick = function(e) {
                if (e.target === fullscreenModal) closeFullscreen();
              };
              document.body.appendChild(fullscreenModal);
            };
            const hideBtn = document.createElement('button');
            hideBtn.textContent = '‡∏ã‡πà‡∏≠‡∏ô‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û';
            hideBtn.style.background = '#444';
            hideBtn.style.color = '#ff1744';
            hideBtn.style.border = 'none';
            hideBtn.style.borderRadius = '6px';
            hideBtn.style.padding = '2px 12px';
            hideBtn.style.margin = '12px 0 0 0';
            hideBtn.style.cursor = 'pointer';
            hideBtn.style.display = 'block';
            hideBtn.style.fontSize = '1em';
            hideBtn.onclick = function() {
              container.remove();
              btn.innerHTML = '‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û';
              btn.dataset.shown = '';
              btn.style.display = '';
            };
            container.appendChild(img);
            container.appendChild(hideBtn);
            btn.parentNode.insertBefore(container, btn.nextSibling);
            btn.innerHTML = '';
            btn.dataset.shown = '1';
            btn.style.display = 'none';
          }
        };
      });
      // ‡∏Ñ‡∏•‡∏¥‡∏õ YouTube
      descArea.querySelectorAll('.desc-yt-btn').forEach(btn => {
        btn.onclick = function() {
          if (btn.dataset.shown === '1') {
            if (btn.nextSibling && btn.nextSibling.className === 'desc-yt-container') {
              btn.nextSibling.remove();
            }
            btn.innerHTML = '‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏•‡∏¥‡∏õ YouTube';
            btn.dataset.shown = '';
            btn.style.display = '';
          } else {
            const container = document.createElement('div');
            container.className = 'desc-yt-container';
            container.style.display = 'flex';
            container.style.flexDirection = 'column';
            container.style.alignItems = 'center';
            container.style.justifyContent = 'center';
            container.style.margin = '8px 0';
            // iframe YouTube
            const ytId = btn.getAttribute('data-yt-id');
            const iframe = document.createElement('iframe');
            iframe.src = `https://www.youtube.com/embed/${ytId}`;
            iframe.width = '400';
            iframe.height = '225';
            iframe.style.maxWidth = '100%';
            iframe.style.borderRadius = '8px';
            iframe.style.boxShadow = '0 2px 8px #0006';
            iframe.setAttribute('allowfullscreen', '');
            iframe.setAttribute('frameborder', '0');
            iframe.setAttribute('allow', 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture');
            // ‡∏õ‡∏∏‡πà‡∏°‡∏ã‡πà‡∏≠‡∏ô‡∏Ñ‡∏•‡∏¥‡∏õ
            const hideBtn = document.createElement('button');
            hideBtn.textContent = '‡∏ã‡πà‡∏≠‡∏ô‡∏Ñ‡∏•‡∏¥‡∏õ YouTube';
            hideBtn.style.background = '#222';
            hideBtn.style.color = '#ff1744';
            hideBtn.style.border = 'none';
            hideBtn.style.borderRadius = '6px';
            hideBtn.style.padding = '2px 12px';
            hideBtn.style.margin = '12px 0 0 0';
            hideBtn.style.cursor = 'pointer';
            hideBtn.style.display = 'block';
            hideBtn.style.fontSize = '1em';
            hideBtn.onclick = function() {
              container.remove();
              btn.innerHTML = '‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏•‡∏¥‡∏õ YouTube';
              btn.dataset.shown = '';
              btn.style.display = '';
            };
            container.appendChild(iframe);
            container.appendChild(hideBtn);
            btn.parentNode.insertBefore(container, btn.nextSibling);
            btn.innerHTML = '';
            btn.dataset.shown = '1';
            btn.style.display = 'none';
          }
        };
      });
      // --- ‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏ä‡∏±‡πà‡∏ô‡πÄ‡∏î‡πâ‡∏á modal ‡∏à‡∏≤‡∏Å‡∏õ‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà‡∏Å‡∏î ---
      // ‡∏´‡∏≤‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏õ‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà‡∏Å‡∏î (addon-card)
      const cards = document.querySelectorAll('.addon-card');
      let cardRect = null;
      if (cards[idx]) cardRect = cards[idx].getBoundingClientRect();
      const centerX = window.innerWidth/2;
      const centerY = window.innerHeight/2;
      let cardX = centerX, cardY = centerY;
      if (cardRect) {
        cardX = cardRect.left + cardRect.width/2;
        cardY = cardRect.top + cardRect.height/2;
      }
      const dx = cardX - centerX;
      const dy = cardY - centerY;
      content.style.setProperty('--detail-x', dx+'px');
      content.style.setProperty('--detail-y', dy+'px');
      modal.style.display = 'flex';
      setTimeout(function() {
        content.classList.remove('hide-anim');
        content.classList.add('detail-show-anim');
      }, 10);
      // History API: push state for modal
      if (!window._addonModalOpen) {
        window.history.pushState({modal:'detail'}, '', window.location.href);
        window._addonModalOpen = true;
      }
    }
    function closeDetailModal() {
      var modal = document.getElementById('detailModal');
      var content = document.getElementById('modalContent');
      content.classList.remove('detail-show-anim');
      content.classList.add('hide-anim');
      setTimeout(function() {
        modal.style.display = 'none';
        content.classList.remove('hide-anim');
      }, 300);
      if (window._addonModalOpen) {
        window._addonModalOpen = false;
        // Only go back if user pressed back, not programmatically
        if (window.history.state && window.history.state.modal === 'detail') {
          window.history.back();
        }
      }
    }
    // Listen for back button to close modal
    window.addEventListener('popstate', function(e) {
      if (window._addonModalOpen) {
        closeDetailModal();
      }
    });

    function openAddModal() {
      document.getElementById('addModal').style.display = 'flex';
    }
    function closeAddModal() {
      document.getElementById('addModal').style.display = 'none';
      document.getElementById('addForm').reset();
      document.getElementById('versionFields').innerHTML = '';
    }
    function addVersionField() {
      const div = document.createElement('div');
      div.style.display = 'flex';
      div.style.gap = '8px';
      div.style.marginTop = '8px';
      div.innerHTML = `<input type="text" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡πà‡∏ô ‡πÄ‡∏ä‡πà‡∏ô 1.20.1" class="verName">
      <input type="text" placeholder="‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î (Google Drive)" class="verLink">
      <button type="button" style="background:#ff1744;color:#fff;border:none;border-radius:6px;padding:0 10px;cursor:pointer;" onclick="this.parentNode.remove()">‡∏•‡∏ö</button>`;
      document.getElementById('versionFields').appendChild(div);
    }
    // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏°‡∏µ 1 ‡πÅ‡∏ñ‡∏ß‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î modal ‡πÄ‡∏û‡∏¥‡πà‡∏°
    function openAddModal() {
      document.getElementById('addModal').style.display = 'flex';
      document.getElementById('addForm').reset();
      document.getElementById('versionFields').innerHTML = '';
      addVersionField();
    }
    document.getElementById('addForm').onsubmit = function(e) {
      e.preventDefault();
      const title = document.getElementById('newTitle').value.trim();
      const desc = document.getElementById('newDesc').value.trim();
      let img = document.getElementById('newImg').value.trim();
      if (typeof convertDriveImageUrl === 'function') {
        img = convertDriveImageUrl(img);
      }
      const verNames = Array.from(document.querySelectorAll('#versionFields .verName')).map(i => i.value.trim());
      const verLinks = Array.from(document.querySelectorAll('#versionFields .verLink')).map(i => i.value.trim());
      let versions = [];
      for (let i = 0; i < verNames.length; i++) {
        if (verNames[i] || verLinks[i]) {
          versions.push({ name: verNames[i], link: verLinks[i] });
        }
      }
      addons.push({ title, desc, img, versions });
      renderAddons(addons);
      closeAddModal();
      saveAddons();
    };

    // Modal ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Add-on
    let editIdx = null;
    function openEditModal(idx) {
      editIdx = idx;
      const addon = addons[idx];
      document.getElementById('editTitle').value = addon.title || '';
      document.getElementById('editDesc').value = addon.desc || '';
      document.getElementById('editImg').value = addon.img || '';
      const editFields = document.getElementById('editVersionFields');
      editFields.innerHTML = '';
      (addon.versions||[]).forEach(ver => {
        const div = document.createElement('div');
        div.style.display = 'flex';
        div.style.gap = '8px';
        div.style.marginTop = '8px';
        div.innerHTML = `<input type="text" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡πà‡∏ô ‡πÄ‡∏ä‡πà‡∏ô 1.20.1" class="verName" value="${ver.name||''}">
        <input type="text" placeholder="‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î (Google Drive)" class="verLink" value="${ver.link||''}">
        <button type="button" style="background:#ff1744;color:#fff;border:none;border-radius:6px;padding:0 10px;cursor:pointer;" onclick="this.parentNode.remove()">‡∏•‡∏ö</button>`;
        editFields.appendChild(div);
      });
      if ((addon.versions||[]).length === 0) addEditVersionField();
      document.getElementById('editModal').style.display = 'flex';
    }
    function closeEditModal() {
      document.getElementById('editModal').style.display = 'none';
      editIdx = null;
    }
    function addEditVersionField() {
      const div = document.createElement('div');
      div.style.display = 'flex';
      div.style.gap = '8px';
      div.style.marginTop = '8px';
      div.innerHTML = `<input type="text" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡πà‡∏ô ‡πÄ‡∏ä‡πà‡∏ô 1.20.1" class="verName">
      <input type="text" placeholder="‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î (Google Drive)" class="verLink">
      <button type="button" style="background:#ff1744;color:#fff;border:none;border-radius:6px;padding:0 10px;cursor:pointer;" onclick="this.parentNode.remove()">‡∏•‡∏ö</button>`;
      document.getElementById('editVersionFields').appendChild(div);
    }
    document.getElementById('editForm').onsubmit = function(e) {
      e.preventDefault();
      if (editIdx === null) return;
      const title = document.getElementById('editTitle').value.trim();
      const desc = document.getElementById('editDesc').value.trim();
      let img = document.getElementById('editImg').value.trim();
      if (typeof convertDriveImageUrl === 'function') {
        img = convertDriveImageUrl(img);
      }
      const verNames = Array.from(document.querySelectorAll('#editVersionFields .verName')).map(i => i.value.trim());
      const verLinks = Array.from(document.querySelectorAll('#editVersionFields .verLink')).map(i => i.value.trim());
      let versions = [];
      for (let i = 0; i < verNames.length; i++) {
        if (verNames[i] || verLinks[i]) {
          versions.push({ name: verNames[i], link: verLinks[i] });
        }
      }
      addons[editIdx] = { title, desc, img, versions };
      renderAddons(addons);
      closeEditModal();
      saveAddons();
    };

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏•‡∏ö Add-on
function deleteAddon() {
  if (editIdx === null) return;
  addons.splice(editIdx, 1);
  closeEditModal();
  renderAddons(addons);
  saveAddons();
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô Export Add-on
function exportAddons() {
  const jsStr =
    'let addons = ' + JSON.stringify(addons, null, 2) + ' \nlet isAdmin = false;\n';
  const blob = new Blob([jsStr], { type: 'text/javascript' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = 'addons.js';
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  URL.revokeObjectURL(url);
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô Save Add-on (‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°/‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç/‡∏•‡∏ö)
function saveAddons() {
  // ‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á LocalStorage ‡∏≠‡∏µ‡∏Å‡∏ï‡πà‡∏≠‡πÑ‡∏õ
}

// ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Add-on ‡∏à‡∏≤‡∏Å‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ addons ‡∏ó‡∏µ‡πà‡∏ù‡∏±‡∏á‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
window.onload = function() {
  renderAddons(addons);
}

    // Render ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å
    renderAddons(addons);
  </script>
  <script>
document.addEventListener('DOMContentLoaded', function() {
  var siteLogo = document.getElementById('siteLogo');
  if (siteLogo) {
    siteLogo.onclick = openYtModal;
  }
});

// --- Modal YouTube ‡πÄ‡∏î‡πâ‡∏á‡∏à‡∏≤‡∏Å‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏õ‡∏∏‡πà‡∏°‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô ---
let ytModalOpen = false;
function openYtModal() {
  // History API: push state ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö modal YouTube
  if (!window._ytModalOpen) {
    window.history.pushState({modal:'yt'}, '', window.location.href);
    window._ytModalOpen = true;
  }
  if (ytModalOpen) return; // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏ã‡πâ‡∏≠‡∏ô
  ytModalOpen = true;
  const modal = document.getElementById('ytModal');
  const content = modal.querySelector('.modal-content');
  // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏õ‡∏∏‡πà‡∏°‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô
  const logo = document.getElementById('siteLogo');
  const rect = logo.getBoundingClientRect();
  // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì offset ‡∏à‡∏≤‡∏Å‡∏Å‡∏•‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠ (modal-content ‡∏à‡∏∞‡∏≠‡∏¢‡∏π‡πà‡∏Å‡∏•‡∏≤‡∏á‡∏à‡∏≠)
  const centerX = window.innerWidth/2;
  const centerY = window.innerHeight/2;
  const iconX = rect.left + rect.width/2;
  const iconY = rect.top + rect.height/2;
  const dx = iconX - centerX;
  const dy = iconY - centerY;
  // set custom property
  content.style.setProperty('--yt-x', dx+'px');
  content.style.setProperty('--yt-y', dy+'px');
  // reset hide anim
  content.classList.remove('yt-hide-anim');
  // show modal
  modal.style.display = 'flex';
  setTimeout(function() {
    content.classList.add('yt-show-anim');
  }, 10);
}
function closeYtModal() {
  if (window._ytModalOpen) {
    window._ytModalOpen = false;
    // Only go back if user pressed back, not programmatically
    if (window.history.state && window.history.state.modal === 'yt') {
      window.history.back();
    }
  }
// ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏° back (popstate) ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö modal YouTube
window.addEventListener('popstate', function(e) {
  if (ytModalOpen) {
    closeYtModal();
  }
});
  if (!ytModalOpen) return;
  ytModalOpen = false;
  const modal = document.getElementById('ytModal');
  const content = modal.querySelector('.modal-content');
  // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏õ‡∏∏‡πà‡∏°‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á (‡πÄ‡∏ú‡∏∑‡πà‡∏≠ resize)
  const logo = document.getElementById('siteLogo');
  const rect = logo.getBoundingClientRect();
  const centerX = window.innerWidth/2;
  const centerY = window.innerHeight/2;
  const iconX = rect.left + rect.width/2;
  const iconY = rect.top + rect.height/2;
  const dx = iconX - centerX;
  const dy = iconY - centerY;
  content.style.setProperty('--yt-x', dx+'px');
  content.style.setProperty('--yt-y', dy+'px');
  content.classList.remove('yt-show-anim');
  content.classList.add('yt-hide-anim');
  setTimeout(function() {
    modal.style.display = 'none';
    content.classList.remove('yt-hide-anim');
  }, 320);
}
</script>
</body>
</html>
